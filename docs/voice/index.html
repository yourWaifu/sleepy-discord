<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/sleepy-discord/blog/rss.xml" title="Sleepy Discord Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/sleepy-discord/blog/atom.xml" title="Sleepy Discord Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Sleepy Discord" href="/sleepy-discord/opensearch.xml"><title data-react-helmet="true">Voice | Sleepy Discord</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Voice | Sleepy Discord"><meta data-react-helmet="true" name="description" content="Connect to a Voice Channel"><meta data-react-helmet="true" property="og:description" content="Connect to a Voice Channel"><meta data-react-helmet="true" property="og:url" content="https://yourwaifu.dev//sleepy-discord/docs/voice"><link data-react-helmet="true" rel="shortcut icon" href="/sleepy-discord/img/title-icon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://yourwaifu.dev//sleepy-discord/docs/voice"><link rel="stylesheet" href="/sleepy-discord/styles.f2abcdeb.css">
<link rel="preload" href="/sleepy-discord/styles.55b84cb0.js" as="script">
<link rel="preload" href="/sleepy-discord/runtime~main.c2b7e374.js" as="script">
<link rel="preload" href="/sleepy-discord/main.467a5b4e.js" as="script">
<link rel="preload" href="/sleepy-discord/1.4eadb5ef.js" as="script">
<link rel="preload" href="/sleepy-discord/2.bb8d9755.js" as="script">
<link rel="preload" href="/sleepy-discord/308.9df52d3f.js" as="script">
<link rel="preload" href="/sleepy-discord/311.3497d819.js" as="script">
<link rel="preload" href="/sleepy-discord/935f2afb.52ed8d1c.js" as="script">
<link rel="preload" href="/sleepy-discord/17896441.8367fea7.js" as="script">
<link rel="preload" href="/sleepy-discord/d2ddc57a.198b9964.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbarHideable_17Wu navbarHidden_19ww"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/sleepy-discord/"><strong class="navbar__title">Sleepy Discord</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/sleepy-discord/docs/">Docs</a><a class="navbar__item navbar__link" href="/sleepy-discord/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yourWaifu/sleepy-discord" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://discord.com/invite/5VDrVfK" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord</a><a href="https://github.com/sponsors/yourWaifu" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Donate</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/sleepy-discord/"><strong class="navbar__title">Sleepy Discord</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/sleepy-discord/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/sleepy-discord/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/yourWaifu/sleepy-discord" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://discord.com/invite/5VDrVfK" target="_blank" rel="noopener noreferrer" class="menu__link">Discord</a></li><li class="menu__list-item"><a href="https://github.com/sponsors/yourWaifu" target="_blank" rel="noopener noreferrer" class="menu__link">Donate</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy sidebarWithHideableNavbar_CROi"><a tabindex="-1" class="sidebarLogo_xFc8" href="/sleepy-discord/"><strong>Sleepy Discord</strong></a><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sleepy-discord/docs/">Starting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sleepy-discord/docs/setup-standard">Standard Configuration</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Generate Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sleepy-discord/docs/setup-standard-gui">CMake Graphical User Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sleepy-discord/docs/setup-standard-vs-cmake">Visual Studio CMake</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sleepy-discord/docs/setup-standard-cli">CMake Command Line Interface</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sleepy-discord/docs/generator-compile">Build</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sleepy-discord/docs/common-build-errors">Common Errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sleepy-discord/docs/only-sleepy-discord">Using only Sleepy Discord</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Topics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/sleepy-discord/docs/events">Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/sleepy-discord/docs/requests">Requests</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/sleepy-discord/docs/voice">Voice</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/sleepy-discord/docs/unicode">Unicode and Emojis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/sleepy-discord/docs/snowflake">Snowflakes and IDs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/sleepy-discord/docs/connect-options">Connection Options</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sleepy-discord/docs/reference/index_classes">Classes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sleepy-discord/docs/reference/index_files">Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sleepy-discord/docs/reference/index_namespaces">Namespaces</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_2WRA"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_CoMu"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Voice</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="connect-to-a-voice-channel"></a>Connect to a Voice Channel<a class="hash-link" href="#connect-to-a-voice-channel" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cpp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">myClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">connectToVoiceChannel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;channelID&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;serverID&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cpp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">myClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">connectToVoiceChannel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">myClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">createVoiceContext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;channelID&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;serverID&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">nullptr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>There are a few ways to connect to a voice channel but the first example, calling <code>BaseDiscordClient::connectToVoiceChannel</code> with just a <code>channelID</code> and <code>serverID</code>, is the simplest.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="event-handling"></a>Event Handling<a class="hash-link" href="#event-handling" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cpp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">VoiceEventHandler</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> SleepyDiscord</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">BaseVoiceEventHandler </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">VoiceEventHandler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">onReady</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SleepyDiscord</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">VoiceConnection</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> connection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/*Do stuff when ready to start sending audio*/</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">VoiceEventHandler voiceEventHandler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//somewhere else in your code</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">SleepyDiscord</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">VoiceContext</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> myClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">createContext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;channelID&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;serverID&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> voiceEventHandler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//or</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setVoiceHandler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">voiceEventHandler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Event handling is done in a separated inherited object, a VoiceEventHandler, creating one is done by simply creating a class that inherits traits from <code>BaseVoiceEventHandler</code>.</p><p>During runtime, a reference of or pointer to your VoiceEventHandler will need to be given to a <code>VoiceContext</code>. This object should live longer then the VoiceContexts that hold the pointer to your VoiceEventHandler (VoiceContexts are destroyed after closing the connection). Not doing so will cause the client to crash.</p><p>One useful event being the <code>BaseVoiceEventHandler::onReady</code> event. This is called when the client has finished connecting and is ready to start sending data to one of Discord&#x27;s voice servers. Some of you maybe confused as to why this is done via a callback and asking &quot;Shouldn&#x27;t the client be ready after calling <code>BaseDiscordClient::connectToVoiceChannel</code>?&quot;. This is because, there&#x27;s a number of steps involved with getting ready that happen outside the function call.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="linking-the-needed-libraries"></a>Linking the needed libraries<a class="hash-link" href="#linking-the-needed-libraries" title="Direct link to heading">#</a></h2><p>You&#x27;ll need those if you want to send or receive audio.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="sodium"></a>Sodium<a class="hash-link" href="#sodium" title="Direct link to heading">#</a></h3><p>Instructions on <a href="https://download.libsodium.org/doc/installation/" target="_blank" rel="noopener noreferrer">libsodium&#x27;s website</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="opus"></a>Opus<a class="hash-link" href="#opus" title="Direct link to heading">#</a></h3><p>Download the source from <a href="https://opus-codec.org/downloads/" target="_blank" rel="noopener noreferrer">opus&#x27;s website</a>. It will contain instructions for compiling with make. You can also compile using Visual Studio from the files inside win32.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="a-udp-library"></a>A UDP library<a class="hash-link" href="#a-udp-library" title="Direct link to heading">#</a></h3><p>Two options, using a custom one or you may instead use ASIO, which you should already have if you are using Websockets++ or uWebSockets.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="sending-audio"></a>Sending Audio<a class="hash-link" href="#sending-audio" title="Direct link to heading">#</a></h2><p>Once connected to a voice server with all needed library linked, we can begin sending Audio to over to Discord. To do this, create a <code>AudioSource</code>, and then call <code>VoiceConnection::startSpeaking</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="audio-sources"></a>Audio Sources<a class="hash-link" href="#audio-sources" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cpp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Music</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> SleepyDiscord</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">AudioPointerSource </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">Music</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> SleepyDiscord</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">AudioPointerSource</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        File </span><span class="token function" style="color:rgb(130, 170, 255)">musicFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;music.raw&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        musicLength </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> musicFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getSize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">sizeof</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int16_t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        music </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> musicFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int16_t</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">constexpr</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">inline</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">bool</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">isOpusEncoded</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//optional, will be false by default</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SleepyDiscord</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">AudioTransmissionDetails</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> details</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int16_t</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">size_t</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        buffer </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">music</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">progress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        length </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> details</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">proposedLength</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">musicLength </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> progress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> details</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">proposedLength</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        progress </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> details</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">proposedLength</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//note: set length to 0 to stop speaking</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">size_t progress </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int16_t</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> music</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">size_t musicLength</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cpp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">SquareWave</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> SleepyDiscord</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">AudioVectorSource </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">SquareWave</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> SleepyDiscord</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">AudioVectorSource</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sampleOffset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int16_t</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SleepyDiscord</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">AudioTransmissionDetails</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> details</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int16_t</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">details</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">proposedLength</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int16_t</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> sample </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//2000 is the volume</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//100 is how long half the square wave is</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                sample </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain">sampleOffset </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2000</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">2000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//note: return vector with a size of 0 to stop speaking</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">size_t sampleOffset </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Creating an AudioSource is done by creating a class that inherits a type of AudioSource and filling in the virtual function, <code>read</code>.</p><p>This read function should, by default, output PCM stereo audio samples at 48000 Hz with the 2 channels interleaved.
If you aren&#x27;t familiar with digital audio samples, <a href="http://manual.audacityteam.org/man/digital_audio.html" target="_blank" rel="noopener noreferrer">here&#x27;s a good article about it</a>.
In the <code>read</code> function, you&#x27;ll be given a <code>SleepyDiscord::AudioTransmissionDetails</code>, this will give details about what audio settings to use and some other stuff like how much audio has been sent since last time.
Don&#x27;t worry about calling read, the library will instead call <code>read</code> when audio data is needed while sending audio.</p><blockquote><p>You can also send Opus encoded audio instead of PMC audio</p></blockquote><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cpp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Music</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> SleepyDiscord</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">AudioPointerSource </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">constexpr</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">inline</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">bool</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">isOpusEncoded</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>As of when this was written, there are two types of <code>AudioSources</code>, pointer and vector. They differ in their read function.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="audiopointersource"></a>AudioPointerSource<a class="hash-link" href="#audiopointersource" title="Direct link to heading">#</a></h4><p><code>read</code> points a pointer to a buffer of audio data and sets the length.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="audiovectorsource"></a>AudioVectorSource<a class="hash-link" href="#audiovectorsource" title="Direct link to heading">#</a></h4><p><code>read</code> returns a vector of audio data</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The sizes of audio buffers should 960. Which is .02 seconds of 48kHz stereo audio.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="related-articles"></a>Related Articles<a class="hash-link" href="#related-articles" title="Direct link to heading">#</a></h4><p><a href="http://manual.audacityteam.org/man/digital_audio.html" target="_blank" rel="noopener noreferrer">Digital Audio Fundamentals</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="speak"></a>Speak<a class="hash-link" href="#speak" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cpp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//In your VoiceEventHandler</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">onReady</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SleepyDiscord</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">VoiceConnection</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> connection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    connection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">startSpeaking</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">SquareWave</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/*Parameters to pass over to SquareWave&#x27;s constructor*/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>To start speaking, call <code>VoiceConnection::startSpeaking</code> with your AudioSource as the template parameter. To stop, send a buffer with the length of zero in your AudioSource&#x27;s read function. If your AudioSource has any parameters in it&#x27;s constructor, you pass them to this function. You may also use <code>VoiceConnection::stopSpeaking</code> to stop speaking.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="receiving-audio"></a>Receiving Audio<a class="hash-link" href="#receiving-audio" title="Direct link to heading">#</a></h2><p>Not implemented yet.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="disconnecting"></a>Disconnecting<a class="hash-link" href="#disconnecting" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cpp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">onEndSpeaking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SleepyDiscord</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">VoiceConnection</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> connection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    connection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">disconnect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>There are a few ways to disconnect, the simplest being calling <code>VoiceConnection::disconnect</code>. You can also disconnect with a VoiceContext or channelID by using <code>BaseDiscordClient::disconnectVoiceContext</code> or <code>BaseDiscordClient:disconnectFromVoiceChannel</code>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-02-07T09:18:55.000Z" class="docLastUpdatedAt_1Qna">2/7/2021</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/sleepy-discord/docs/requests"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Requests</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/sleepy-discord/docs/unicode"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Unicode and Emojis Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#connect-to-a-voice-channel" class="table-of-contents__link">Connect to a Voice Channel</a></li><li><a href="#event-handling" class="table-of-contents__link">Event Handling</a></li><li><a href="#linking-the-needed-libraries" class="table-of-contents__link">Linking the needed libraries</a><ul><li><a href="#sodium" class="table-of-contents__link">Sodium</a></li><li><a href="#opus" class="table-of-contents__link">Opus</a></li><li><a href="#a-udp-library" class="table-of-contents__link">A UDP library</a></li></ul></li><li><a href="#sending-audio" class="table-of-contents__link">Sending Audio</a><ul><li><a href="#audio-sources" class="table-of-contents__link">Audio Sources</a></li><li><a href="#speak" class="table-of-contents__link">Speak</a></li></ul></li><li><a href="#receiving-audio" class="table-of-contents__link">Receiving Audio</a></li><li><a href="#disconnecting" class="table-of-contents__link">Disconnecting</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/sleepy-discord/docs/events">Topics</a></li><li class="footer__item"><a class="footer__link-item" href="/sleepy-discord/docs/reference/index_classes">Reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/yourWaifu/sleepy-discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://discord.com/invite/5VDrVfK" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord Server</a></li><li class="footer__item"><a href="https://github.com/sponsors/yourWaifu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsor or Donate</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Credits</h4><ul class="footer__items"><li class="footer__item"><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Built in 2021 with Docusaurus and Doxybook2</a></li><li class="footer__item"><a href="https://yourwaifu.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Maintained By yourWaifu</a></li><li class="footer__item"><a href="https://github.com/yourWaifu/sleepy-discord-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docs Git Repo</a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/sleepy-discord/styles.55b84cb0.js"></script>
<script src="/sleepy-discord/runtime~main.c2b7e374.js"></script>
<script src="/sleepy-discord/main.467a5b4e.js"></script>
<script src="/sleepy-discord/1.4eadb5ef.js"></script>
<script src="/sleepy-discord/2.bb8d9755.js"></script>
<script src="/sleepy-discord/308.9df52d3f.js"></script>
<script src="/sleepy-discord/311.3497d819.js"></script>
<script src="/sleepy-discord/935f2afb.52ed8d1c.js"></script>
<script src="/sleepy-discord/17896441.8367fea7.js"></script>
<script src="/sleepy-discord/d2ddc57a.198b9964.js"></script>
</body>
</html>